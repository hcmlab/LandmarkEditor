var Ne=Object.defineProperty;var Re=(a,l,t)=>l in a?Ne(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;var ge=(a,l,t)=>Re(a,typeof l!="symbol"?l+"":l,t);import{d as O,u as Z,c as S,a as _,o as p,w as g,r as k,n as H,b as W,e as d,f as M,t as D,g as $e,h as be,i as Oe,j as we,k as Ve,l as se,p as Ue,m as De,q as je,s as ee,v as C,x as j,y as le,F as te,z as We,A as ye,B as Ge,C as ze,D as He,E as Xe,G as Be,H as qe,I as ce,J as v,_ as Je,M as Pe,K as Ke,P as Ye,L as K,N as Ze,O as Qe,$ as J,T as et}from"./index-DRfJpMGD.js";import{_ as tt}from"./ToolMenuPreamble.vue_vue_type_script_setup_true_lang-J8khxapo.js";const ue=(a,l,t,o=t)=>l.reduce((n,r)=>(a[r]&&n.push([o,r.replace(t,""),a[r]].filter(e=>e&&typeof e!="boolean").join("-").toLowerCase()),n),[]),Se=O({__name:"BCol",props:{alignSelf:{default:void 0},tag:{default:"div"},order:{default:void 0},offset:{default:void 0},cols:{default:void 0},col:{type:Boolean,default:!1},offsetSm:{default:void 0},offsetMd:{default:void 0},offsetLg:{default:void 0},offsetXl:{default:void 0},offsetXxl:{default:void 0},orderSm:{default:void 0},orderMd:{default:void 0},orderLg:{default:void 0},orderXl:{default:void 0},orderXxl:{default:void 0},sm:{type:[Boolean,Number,String],default:!1},md:{type:[Boolean,Number,String],default:!1},lg:{type:[Boolean,Number,String],default:!1},xl:{type:[Boolean,Number,String],default:!1},xxl:{type:[Boolean,Number,String],default:!1}},setup(a){const t=Z(a,"BCol"),o=S(()=>[...ue({sm:t.sm,md:t.md,lg:t.lg,xl:t.xl,xxl:t.xxl},["sm","md","lg","xl","xxl"],"col"),...ue({order:t.order,orderLg:t.orderLg,orderMd:t.orderMd,orderSm:t.orderSm,orderXl:t.orderXl,orderXxl:t.orderXxl},["order","orderLg","orderMd","orderSm","orderXl","orderXxl"],"order"),...ue({offset:t.offset,offsetLg:t.offsetLg,offsetMd:t.offsetMd,offsetSm:t.offsetSm,offsetXl:t.offsetXl,offsetXxl:t.offsetXxl},["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXxl"],"offset")]),n=S(()=>[o.value,{col:t.col||!o.value.some(r=>r.startsWith("col-"))&&!t.cols,[`col-${t.cols}`]:t.cols!==void 0,[`offset-${t.offset}`]:t.offset!==void 0,[`order-${t.order}`]:t.order!==void 0,[`align-self-${t.alignSelf}`]:t.alignSelf!==void 0}]);return(r,e)=>(p(),_(W(d(t).tag),{class:H(n.value)},{default:g(()=>[k(r.$slots,"default")]),_:3},8,["class"]))}}),ot=O({__name:"BFormInvalidFeedback",props:{ariaLive:{default:void 0},forceShow:{type:Boolean,default:!1},id:{default:void 0},role:{default:void 0},state:{type:[Boolean,null],default:null},tag:{default:"div"},text:{default:void 0},tooltip:{type:Boolean,default:!1}},setup(a){const t=Z(a,"BFormInvalidFeedback"),o=S(()=>t.forceShow===!0||t.state===!1),n=S(()=>({"d-block":o.value,"invalid-feedback":!t.tooltip,"invalid-tooltip":t.tooltip}));return(r,e)=>(p(),_(W(d(t).tag),{id:d(t).id,role:d(t).role,"aria-live":d(t).ariaLive,"aria-atomic":d(t).ariaLive?!0:void 0,class:H(n.value)},{default:g(()=>[k(r.$slots,"default",{},()=>[M(D(d(t).text),1)])]),_:3},8,["id","role","aria-live","aria-atomic","class"]))}}),at=O({__name:"BFormRow",props:{tag:{default:"div"}},setup(a){const t=Z(a,"BFormRow");return(o,n)=>(p(),_(W(d(t).tag),{class:"row d-flex flex-wrap"},{default:g(()=>[k(o.$slots,"default")]),_:3}))}}),rt=O({__name:"BFormText",props:{id:{default:void 0},inline:{type:Boolean,default:!1},tag:{default:"small"},text:{default:void 0},textVariant:{default:"body-secondary"}},setup(a){const t=Z(a,"BFormText"),o=$e(t),n=S(()=>[o.value,{"form-text":!t.inline}]);return(r,e)=>(p(),_(W(d(t).tag),{id:d(t).id,class:H(n.value)},{default:g(()=>[k(r.$slots,"default",{},()=>[M(D(d(t).text),1)])]),_:3},8,["id","class"]))}}),nt=O({__name:"BFormValidFeedback",props:{ariaLive:{default:void 0},forceShow:{type:Boolean,default:!1},id:{default:void 0},role:{default:void 0},state:{type:[Boolean,null],default:null},tag:{default:"div"},text:{default:void 0},tooltip:{type:Boolean,default:!1}},setup(a){const t=Z(a,"BFormInvalidFeedback"),o=S(()=>t.forceShow===!0||t.state===!0),n=S(()=>({"d-block":o.value,"valid-feedback":!t.tooltip,"valid-tooltip":t.tooltip}));return(r,e)=>(p(),_(W(d(t).tag),{id:d(t).id,role:d(t).role,"aria-live":d(t).ariaLive,"aria-atomic":d(t).ariaLive?!0:void 0,class:H(n.value)},{default:g(()=>[k(r.$slots,"default",{},()=>[M(D(d(t).text),1)])]),_:3},8,["id","role","aria-live","aria-atomic","class"]))}}),lt=(a,l)=>S(()=>{const t=be(a),o=be(l);return t===!0?"true":typeof t=="string"?t:o===!1?"true":t===!1?"false":void 0}),Me=(a,l)=>l+(a?He(a):""),it={key:0,ref:"_content",class:"form-floating"},st=O({__name:"BFormGroup",props:{contentCols:{type:[Boolean,String,Number],default:void 0},labelCols:{type:[Boolean,String,Number],default:void 0},labelAlign:{default:void 0},ariaInvalid:{type:[Boolean,String],default:void 0},description:{default:void 0},disabled:{type:Boolean,default:!1},feedbackAriaLive:{default:"assertive"},floating:{type:Boolean,default:!1},id:{default:void 0},invalidFeedback:{default:void 0},label:{default:void 0},labelClass:{default:void 0},labelFor:{default:void 0},labelSize:{default:void 0},labelVisuallyHidden:{type:Boolean,default:!1},state:{type:[Boolean,null],default:null},tooltip:{type:Boolean,default:!1},validFeedback:{default:void 0},validated:{type:Boolean,default:!1},contentColsSm:{type:[Boolean,String,Number],default:void 0},contentColsMd:{type:[Boolean,String,Number],default:void 0},contentColsLg:{type:[Boolean,String,Number],default:void 0},contentColsXl:{type:[Boolean,String,Number],default:void 0},labelColsSm:{type:[Boolean,String,Number],default:void 0},labelColsMd:{type:[Boolean,String,Number],default:void 0},labelColsLg:{type:[Boolean,String,Number],default:void 0},labelColsXl:{type:[Boolean,String,Number],default:void 0},labelAlignSm:{default:void 0},labelAlignMd:{default:void 0},labelAlignLg:{default:void 0},labelAlignXl:{default:void 0}},setup(a){const l=["input","select","textarea"],o=Z(a,"BFormGroup"),n=Oe(),r=we(),e=we(),u=Ve(()=>o.state),c=se([]);Ue(Xe,w=>(c.value=[w],{state:u}));const s=S(()=>o.labelFor!==void 0?o.labelFor:c.value[0]&&c.value[0].value?c.value[0].value:null),i=["xs","sm","md","lg","xl"],m=(w,E)=>i.reduce((I,B)=>{const q=Me(B==="xs"?"":B,`${E}Cols`);let h=w[q];if(h=h===""?!0:h||!1,typeof h!="boolean"&&h!=="auto"){const he=Number.parseInt(h);h=Number.isNaN(he)?0:he,h=h>0?h:!1}return h&&(B==="xs"?I[typeof h=="boolean"?"col":"cols"]=h:I[B||(typeof h=="boolean"?"col":"cols")]=h),I},{}),V=De("_content"),F=S(()=>m(o,"content")),L=S(()=>((w,E)=>i.reduce((I,B)=>{const q=Me(B==="xs"?"":B,`${E}Align`),h=w[q]||null;return h&&(B==="xs"?I.push(`text-${h}`):I.push(`text-${B}-${h}`)),I},[]))(o,"label")),N=S(()=>m(o,"label")),A=S(()=>Object.keys(F.value).length>0||Object.keys(N.value).length>0),Q=je(u),ae=lt(()=>o.ariaInvalid,u),ve=w=>{if(s.value||V.value===null)return;const{target:E}=w,I=E?E.tagName:"";if([...l,"a","button","label"].indexOf(I)!==-1)return;const B=[...V.value.querySelectorAll(l.map(h=>`${h}:not([disabled])`).join())].filter(Ge),[q]=B;B.length===1&&q instanceof HTMLElement&&ze(q)},re=ee(()=>o.id),X=ee(void 0,"_BV_label_"),me=S(()=>s.value?"label":"legend"),pe=S(()=>[A.value?"col-form-label":"form-label",{"bv-no-focus-ring":!s.value,"col-form-label":A.value||!s.value,"pt-0":!A.value&&!s.value,"d-block":!A.value&&s.value,[`col-form-label-${o.labelSize}`]:!!o.labelSize,"visually-hidden":o.labelVisuallyHidden},L.value,o.labelClass]),Fe=ee(void 0,"_BV_feedback_invalid_"),Le=ee(void 0,"_BV_feedback_valid_"),ne=ee(void 0,"_BV_description_"),U=S(()=>!s.value);return(w,E)=>(p(),_(W(U.value?"fieldset":"div"),{id:d(re),disabled:U.value?d(o).disabled:null,role:U.value?null:"group","aria-invalid":d(ae),"aria-labelledby":U.value&&A.value?d(X):null,class:H([[d(Q),{"was-validated":d(o).validated}],"b-form-group"])},{default:g(()=>[C(d(e).define,null,{default:g(()=>[n["invalid-feedback"]||d(o).invalidFeedback?(p(),_(ot,{key:0,id:d(Fe),"aria-live":d(o).feedbackAriaLive,state:u.value,tooltip:d(o).tooltip},{default:g(()=>[k(w.$slots,"invalid-feedback",{},()=>[M(D(d(o).invalidFeedback),1)])]),_:3},8,["id","aria-live","state","tooltip"])):le("",!0),n["valid-feedback"]||d(o).validFeedback?(p(),_(nt,{key:1,id:d(Le),"aria-live":d(o).feedbackAriaLive,state:u.value,tooltip:d(o).tooltip},{default:g(()=>[k(w.$slots,"valid-feedback",{},()=>[M(D(d(o).validFeedback),1)])]),_:3},8,["id","aria-live","state","tooltip"])):le("",!0),n.description||d(o).description?(p(),_(rt,{key:2,id:d(ne)},{default:g(()=>[k(w.$slots,"description",{},()=>[M(D(d(o).description),1)])]),_:3},8,["id"])):le("",!0)]),_:3}),C(d(r).define,null,{default:g(()=>[n.label||d(o).label||A.value?(p(),j(te,{key:0},[A.value?(p(),_(Se,We(ye({key:0},N.value)),{default:g(()=>[(p(),_(W(me.value),{id:d(X),for:s.value||null,tabindex:U.value?"-1":null,class:H(pe.value),onClick:E[0]||(E[0]=I=>U.value?ve:null)},{default:g(()=>[k(w.$slots,"label",{},()=>[M(D(d(o).label),1)])]),_:3},8,["id","for","tabindex","class"]))]),_:3},16)):(p(),_(W(me.value),{key:1,id:d(X),for:s.value||null,tabindex:U.value?"-1":null,class:H(pe.value),onClick:E[1]||(E[1]=I=>U.value?ve:null)},{default:g(()=>[k(w.$slots,"label",{},()=>[M(D(d(o).label),1)])]),_:3},8,["id","for","tabindex","class"]))],64)):le("",!0)]),_:3}),A.value?(p(),_(at,{key:0},{default:g(()=>[C(d(r).reuse),C(Se,ye(F.value,{ref:"_content"}),{default:g(()=>[k(w.$slots,"default",{id:d(re),ariaDescribedby:null,descriptionId:d(ne),labelId:d(X)}),C(d(e).reuse)]),_:3},16)]),_:3})):(p(),j(te,{key:1},[d(o).floating&&!A.value?(p(),j("div",it,[k(w.$slots,"default",{id:d(re),ariaDescribedby:null,descriptionId:d(ne),labelId:d(X)}),C(d(r).reuse),C(d(e).reuse)],512)):(p(),j(te,{key:1},[C(d(r).reuse),k(w.$slots,"default",{id:d(re),ariaDescribedby:null,descriptionId:d(ne),labelId:d(X)}),C(d(e).reuse)],64))],64))]),_:3},8,["id","disabled","role","aria-invalid","aria-labelledby","class"]))}}),ut=O({__name:"ViewOptions",setup(a){const l=Be(),t=se(l.showTesselation),o=()=>{l.showTesselation=t.value};return qe(()=>{t.value=l.showTesselation,ce(()=>l.showTesselation,n=>{t.value=n})}),(n,r)=>{const e=Je,u=st;return p(),j(te,null,[r[2]||(r[2]=v("div",{class:"d-flex flex-column w-100 align-items-center"},[v("div",null,[v("b",null,[v("i",{class:"bi bi-eye me-1"}),M(" View ")])])],-1)),C(u,null,{default:g(()=>[C(e,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=c=>t.value=c),switch:"","view-tesselation":"","aria-checked":"mixed",onChange:o},{default:g(()=>r[1]||(r[1]=[M(" Tesselation ")])),_:1},8,["modelValue"])]),_:1}),r[3]||(r[3]=v("div",{class:"mb-2"},null,-1))],64)}}});function R(a,l,t,o){return new(t||(t=Promise))(function(n,r){function e(s){try{c(o.next(s))}catch(i){r(i)}}function u(s){try{c(o.throw(s))}catch(i){r(i)}}function c(s){var i;s.done?n(s.value):(i=s.value,i instanceof t?i:new t(function(m){m(i)})).then(e,u)}c((o=o.apply(a,[])).next())})}function $(a,l){var t,o,n,r,e={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function u(c){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,i[0]&&(e=0)),e;)try{if(t=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,o=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!((n=n.length>0&&n[n.length-1])||i[0]!==6&&i[0]!==2)){e=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){e.label=i[1];break}if(i[0]===6&&e.label<n[1]){e.label=n[1],n=i;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(i);break}n[2]&&e.ops.pop(),e.trys.pop();continue}i=l.call(a,e)}catch(m){i=[6,m],o=0}finally{t=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([c,s])}}}var b={exclude:[],include:[],logging:!0},Ee={},dt={timeout:"true"},T=function(a,l){typeof window<"u"&&(Ee[a]=l)},ct=function(){return Object.fromEntries(Object.entries(Ee).filter(function(a){var l,t=a[0];return!(!((l=b==null?void 0:b.exclude)===null||l===void 0)&&l.includes(t))}).filter(function(a){var l,t,o,n,r=a[0];return!((l=b==null?void 0:b.include)===null||l===void 0)&&l.some(function(e){return e.includes(".")})?(t=b==null?void 0:b.include)===null||t===void 0?void 0:t.some(function(e){return e.startsWith(r)}):((o=b==null?void 0:b.include)===null||o===void 0?void 0:o.length)===0||((n=b==null?void 0:b.include)===null||n===void 0?void 0:n.includes(r))}).map(function(a){return[a[0],(0,a[1])()]}))};function ie(a){return a^=a>>>16,a=Math.imul(a,2246822507),a^=a>>>13,a=Math.imul(a,3266489909),(a^=a>>>16)>>>0}var y=new Uint32Array([597399067,2869860233,951274213,2716044179]);function P(a,l){return a<<l|a>>>32-l}function fe(a,l){var t;if(l===void 0&&(l=0),l=l?0|l:0,typeof a=="string"&&(t=a,a=new TextEncoder().encode(t).buffer),!(a instanceof ArrayBuffer))throw new TypeError("Expected key to be ArrayBuffer or string");var o=new Uint32Array([l,l,l,l]);(function(r,e){for(var u=r.byteLength/16|0,c=new Uint32Array(r,0,4*u),s=0;s<u;s++){var i=c.subarray(4*s,4*(s+1));i[0]=Math.imul(i[0],y[0]),i[0]=P(i[0],15),i[0]=Math.imul(i[0],y[1]),e[0]=e[0]^i[0],e[0]=P(e[0],19),e[0]=e[0]+e[1],e[0]=Math.imul(e[0],5)+1444728091,i[1]=Math.imul(i[1],y[1]),i[1]=P(i[1],16),i[1]=Math.imul(i[1],y[2]),e[1]=e[1]^i[1],e[1]=P(e[1],17),e[1]=e[1]+e[2],e[1]=Math.imul(e[1],5)+197830471,i[2]=Math.imul(i[2],y[2]),i[2]=P(i[2],17),i[2]=Math.imul(i[2],y[3]),e[2]=e[2]^i[2],e[2]=P(e[2],15),e[2]=e[2]+e[3],e[2]=Math.imul(e[2],5)+2530024501,i[3]=Math.imul(i[3],y[3]),i[3]=P(i[3],18),i[3]=Math.imul(i[3],y[0]),e[3]=e[3]^i[3],e[3]=P(e[3],13),e[3]=e[3]+e[0],e[3]=Math.imul(e[3],5)+850148119}})(a,o),function(r,e){var u=r.byteLength/16|0,c=r.byteLength%16,s=new Uint32Array(4),i=new Uint8Array(r,16*u,c);switch(c){case 15:s[3]=s[3]^i[14]<<16;case 14:s[3]=s[3]^i[13]<<8;case 13:s[3]=s[3]^i[12]<<0,s[3]=Math.imul(s[3],y[3]),s[3]=P(s[3],18),s[3]=Math.imul(s[3],y[0]),e[3]=e[3]^s[3];case 12:s[2]=s[2]^i[11]<<24;case 11:s[2]=s[2]^i[10]<<16;case 10:s[2]=s[2]^i[9]<<8;case 9:s[2]=s[2]^i[8]<<0,s[2]=Math.imul(s[2],y[2]),s[2]=P(s[2],17),s[2]=Math.imul(s[2],y[3]),e[2]=e[2]^s[2];case 8:s[1]=s[1]^i[7]<<24;case 7:s[1]=s[1]^i[6]<<16;case 6:s[1]=s[1]^i[5]<<8;case 5:s[1]=s[1]^i[4]<<0,s[1]=Math.imul(s[1],y[1]),s[1]=P(s[1],16),s[1]=Math.imul(s[1],y[2]),e[1]=e[1]^s[1];case 4:s[0]=s[0]^i[3]<<24;case 3:s[0]=s[0]^i[2]<<16;case 2:s[0]=s[0]^i[1]<<8;case 1:s[0]=s[0]^i[0]<<0,s[0]=Math.imul(s[0],y[0]),s[0]=P(s[0],15),s[0]=Math.imul(s[0],y[1]),e[0]=e[0]^s[0]}}(a,o),function(r,e){e[0]=e[0]^r.byteLength,e[1]=e[1]^r.byteLength,e[2]=e[2]^r.byteLength,e[3]=e[3]^r.byteLength,e[0]=e[0]+e[1]|0,e[0]=e[0]+e[2]|0,e[0]=e[0]+e[3]|0,e[1]=e[1]+e[0]|0,e[2]=e[2]+e[0]|0,e[3]=e[3]+e[0]|0,e[0]=ie(e[0]),e[1]=ie(e[1]),e[2]=ie(e[2]),e[3]=ie(e[3]),e[0]=e[0]+e[1]|0,e[0]=e[0]+e[2]|0,e[0]=e[0]+e[3]|0,e[1]=e[1]+e[0]|0,e[2]=e[2]+e[0]|0,e[3]=e[3]+e[0]|0}(a,o);var n=new Uint8Array(o.buffer);return Array.from(n).map(function(r){return r.toString(16).padStart(2,"0")}).join("")}function ft(a,l){return new Promise(function(t){setTimeout(function(){return t(l)},a)})}function vt(a,l,t){return Promise.all(a.map(function(o){return Promise.race([o,ft(l,t)])}))}var mt="0.20.0";function pt(){return mt}function ht(){return R(this,void 0,void 0,function(){var a,l,t,o,n;return $(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a=ct(),l=Object.keys(a),[4,vt(Object.values(a),(b==null?void 0:b.timeout)||1e3,dt)];case 1:return t=r.sent(),o=t.filter(function(e){return e!==void 0}),n={},o.forEach(function(e,u){n[l[u]]=e}),[2,Ie(n,b.exclude||[],b.include||[],"")];case 2:throw r.sent();case 3:return[2]}})})}function Ie(a,l,t,o){o===void 0&&(o="");for(var n={},r=function(s,i){var m=o+s+".";if(typeof i!="object"||Array.isArray(i)){var V=l.some(function(N){return m.startsWith(N)}),F=t.some(function(N){return m.startsWith(N)});V&&!F||(n[s]=i)}else{var L=Ie(i,l,t,m);Object.keys(L).length>0&&(n[s]=L)}},e=0,u=Object.entries(a);e<u.length;e++){var c=u[e];r(c[0],c[1])}return n}function xe(a){return R(this,void 0,void 0,function(){var l,t;return $(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,ht()];case 1:return l=o.sent(),t=fe(JSON.stringify(l)),Math.random()<.001&&b.logging&&function(n,r){R(this,void 0,void 0,function(){var e,u;return $(this,function(c){switch(c.label){case 0:if(e="https://logging.thumbmarkjs.com/v1/log",u={thumbmark:n,components:r,version:pt()},sessionStorage.getItem("_tmjs_l"))return[3,4];sessionStorage.setItem("_tmjs_l","1"),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})];case 2:case 3:return c.sent(),[3,4];case 4:return[2]}})})}(t,l),[2,t.toString()];case 2:throw o.sent();case 3:return[2]}})})}function Y(){if(typeof navigator>"u")return{name:"unknown",version:"unknown"};for(var a=navigator.userAgent,l={edg:"Edge",opr:"Opera",samsung:"SamsungBrowser"},t=0,o=[/(?<name>Edge|Edg)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>(?:Chrome|Chromium|OPR|Opera|Vivaldi|Brave))\/(?<version>\d+(?:\.\d+)?)/,/(?<name>(?:Firefox|Waterfox|Iceweasel|IceCat))\/(?<version>\d+(?:\.\d+)?)/,/(?<name>Safari)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>MSIE|Trident|IEMobile).+?(?<version>\d+(?:\.\d+)?)/,/(?<name>[A-Za-z]+)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>SamsungBrowser)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>samsung).*Version\/(?<version>\d+(?:\.\d+)?)/i];t<o.length;t++){var n=o[t],r=a.match(n);if(r&&r.groups)return{name:l[r.groups.name.toLowerCase()]||r.groups.name,version:r.groups.version}}return{name:"unknown",version:"unknown"}}function gt(a){for(var l=0,t=0;t<a.length;++t)l+=Math.abs(a[t]);return l}var bt=Y();function Te(a,l,t){for(var o=[],n=0;n<a[0].data.length;n++){for(var r=[],e=0;e<a.length;e++)r.push(a[e].data[n]);o.push(wt(r))}var u=new Uint8ClampedArray(o);return new ImageData(u,l,t)}function wt(a){if(a.length===0)return 0;for(var l={},t=0,o=a;t<o.length;t++)l[r=o[t]]=(l[r]||0)+1;var n=a[0];for(var r in l)l[r]>l[n]&&(n=parseInt(r,10));return n}["SamsungBrowser","Safari"].includes(bt.name)||T("audio",function(){return R(this,void 0,void 0,function(){return $(this,function(a){return[2,new Promise(function(l,t){try{var o=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,5e3,44100),n=o.createBufferSource(),r=o.createOscillator();r.frequency.value=1e3;var e,u=o.createDynamicsCompressor();u.threshold.value=-50,u.knee.value=40,u.ratio.value=12,u.attack.value=0,u.release.value=.2,r.connect(u),u.connect(o.destination),r.start(),o.oncomplete=function(c){e=c.renderedBuffer.getChannelData(0),l({sampleHash:gt(e),oscillator:r.type,maxChannels:o.destination.maxChannelCount,channelCountMode:n.channelCountMode})},o.startRendering()}catch(c){console.error("Error creating audio fingerprint:",c),t(c)}})]})})});var yt=Y().name!=="SamsungBrowser"?1:3,Ce=280,_e=20;Y().name!="Firefox"&&T("canvas",function(){return document.createElement("canvas").getContext("2d"),new Promise(function(a){var l=Array.from({length:yt},function(){return function(){var t=document.createElement("canvas"),o=t.getContext("2d");if(!o)return new ImageData(1,1);t.width=Ce,t.height=_e;var n=o.createLinearGradient(0,0,t.width,t.height);n.addColorStop(0,"red"),n.addColorStop(.16666666666666666,"orange"),n.addColorStop(.3333333333333333,"yellow"),n.addColorStop(.5,"green"),n.addColorStop(.6666666666666666,"blue"),n.addColorStop(.8333333333333334,"indigo"),n.addColorStop(1,"violet"),o.fillStyle=n,o.fillRect(0,0,t.width,t.height);var r="Random Text WMwmil10Oo";o.font="23.123px Arial",o.fillStyle="black",o.fillText(r,-5,15),o.fillStyle="rgba(0, 0, 255, 0.5)",o.fillText(r,-3.3,17.7),o.beginPath(),o.moveTo(0,0),o.lineTo(2*t.width/7,t.height),o.strokeStyle="white",o.lineWidth=2,o.stroke();var e=o.getImageData(0,0,t.width,t.height);return e}()});a({commonImageDataHash:fe(Te(l,Ce,_e).data.toString()).toString()})})});var de,St=["Arial","Arial Black","Arial Narrow","Arial Rounded MT","Arimo","Archivo","Barlow","Bebas Neue","Bitter","Bookman","Calibri","Cabin","Candara","Century","Century Gothic","Comic Sans MS","Constantia","Courier","Courier New","Crimson Text","DM Mono","DM Sans","DM Serif Display","DM Serif Text","Dosis","Droid Sans","Exo","Fira Code","Fira Sans","Franklin Gothic Medium","Garamond","Geneva","Georgia","Gill Sans","Helvetica","Impact","Inconsolata","Indie Flower","Inter","Josefin Sans","Karla","Lato","Lexend","Lucida Bright","Lucida Console","Lucida Sans Unicode","Manrope","Merriweather","Merriweather Sans","Montserrat","Myriad","Noto Sans","Nunito","Nunito Sans","Open Sans","Optima","Orbitron","Oswald","Pacifico","Palatino","Perpetua","PT Sans","PT Serif","Poppins","Prompt","Public Sans","Quicksand","Rajdhani","Recursive","Roboto","Roboto Condensed","Rockwell","Rubik","Segoe Print","Segoe Script","Segoe UI","Sora","Source Sans Pro","Space Mono","Tahoma","Taviraj","Times","Times New Roman","Titillium Web","Trebuchet MS","Ubuntu","Varela Round","Verdana","Work Sans"],Mt=["monospace","sans-serif","serif"];function ke(a,l){if(!a)throw new Error("Canvas context not supported");return a.font,a.font="72px ".concat(l),a.measureText("WwMmLli0Oo").width}function xt(){var a,l=document.createElement("canvas"),t=(a=l.getContext("webgl"))!==null&&a!==void 0?a:l.getContext("experimental-webgl");if(t&&"getParameter"in t)try{var o=(t.getParameter(t.VENDOR)||"").toString(),n=(t.getParameter(t.RENDERER)||"").toString(),r={vendor:o,renderer:n,version:(t.getParameter(t.VERSION)||"").toString(),shadingLanguageVersion:(t.getParameter(t.SHADING_LANGUAGE_VERSION)||"").toString()};if(!n.length||!o.length){var e=t.getExtension("WEBGL_debug_renderer_info");if(e){var u=(t.getParameter(e.UNMASKED_VENDOR_WEBGL)||"").toString(),c=(t.getParameter(e.UNMASKED_RENDERER_WEBGL)||"").toString();u&&(r.vendorUnmasked=u),c&&(r.rendererUnmasked=c)}}return r}catch{}return"undefined"}function Ct(){var a=new Float32Array(1),l=new Uint8Array(a.buffer);return a[0]=1/0,a[0]=a[0]-a[0],l[3]}function _t(a,l){var t={};return l.forEach(function(o){var n=function(r){if(r.length===0)return null;var e={};r.forEach(function(s){var i=String(s);e[i]=(e[i]||0)+1});var u=r[0],c=1;return Object.keys(e).forEach(function(s){e[s]>c&&(u=s,c=e[s])}),u}(a.map(function(r){return o in r?r[o]:void 0}).filter(function(r){return r!==void 0}));n&&(t[o]=n)}),t}function kt(){var a=[],l={"prefers-contrast":["high","more","low","less","forced","no-preference"],"any-hover":["hover","none"],"any-pointer":["none","coarse","fine"],pointer:["none","coarse","fine"],hover:["hover","none"],update:["fast","slow"],"inverted-colors":["inverted","none"],"prefers-reduced-motion":["reduce","no-preference"],"prefers-reduced-transparency":["reduce","no-preference"],scripting:["none","initial-only","enabled"],"forced-colors":["active","none"]};return Object.keys(l).forEach(function(t){l[t].forEach(function(o){matchMedia("(".concat(t,": ").concat(o,")")).matches&&a.push("".concat(t,": ").concat(o))})}),a}function At(){if(window.location.protocol==="https:"&&typeof window.ApplePaySession=="function")try{for(var a=window.ApplePaySession.supportsVersion,l=15;l>0;l--)if(a(l))return l}catch{return 0}return 0}Y().name!="Firefox"&&T("fonts",function(){var a=this;return new Promise(function(l,t){try{(function(o){var n;R(this,void 0,void 0,function(){var r,e,u;return $(this,function(c){switch(c.label){case 0:return document.body?[3,2]:[4,(s=50,new Promise(function(m){return setTimeout(m,s,i)}))];case 1:return c.sent(),[3,0];case 2:if((r=document.createElement("iframe")).setAttribute("frameBorder","0"),(e=r.style).setProperty("position","fixed"),e.setProperty("display","block","important"),e.setProperty("visibility","visible"),e.setProperty("border","0"),e.setProperty("opacity","0"),r.src="about:blank",document.body.appendChild(r),!(u=r.contentDocument||((n=r.contentWindow)===null||n===void 0?void 0:n.document)))throw new Error("Iframe document is not accessible");return o({iframe:u}),setTimeout(function(){document.body.removeChild(r)},0),[2]}var s,i})})})(function(o){var n=o.iframe;return R(a,void 0,void 0,function(){var r,e,u,c;return $(this,function(s){return r=n.createElement("canvas"),e=r.getContext("2d"),u=Mt.map(function(i){return ke(e,i)}),c={},St.forEach(function(i){var m=ke(e,i);u.includes(m)||(c[i]=m)}),l(c),[2]})})})}catch{t({error:"unsupported"})}})}),T("hardware",function(){return new Promise(function(a,l){var t=navigator.deviceMemory!==void 0?navigator.deviceMemory:0,o=window.performance&&window.performance.memory?window.performance.memory:0;a({videocard:xt(),architecture:Ct(),deviceMemory:t.toString()||"undefined",jsHeapSizeLimit:o.jsHeapSizeLimit||0})})}),T("locales",function(){return new Promise(function(a){a({languages:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})})}),T("permissions",function(){return R(this,void 0,void 0,function(){var a;return $(this,function(l){return de=(b==null?void 0:b.permissions_to_check)||["accelerometer","accessibility","accessibility-events","ambient-light-sensor","background-fetch","background-sync","bluetooth","camera","clipboard-read","clipboard-write","device-info","display-capture","gyroscope","geolocation","local-fonts","magnetometer","microphone","midi","nfc","notifications","payment-handler","persistent-storage","push","speaker","storage-access","top-level-storage-access","window-management","query"],a=Array.from({length:(b==null?void 0:b.retries)||3},function(){return function(){return R(this,void 0,void 0,function(){var t,o,n,r,e;return $(this,function(u){switch(u.label){case 0:t={},o=0,n=de,u.label=1;case 1:if(!(o<n.length))return[3,6];r=n[o],u.label=2;case 2:return u.trys.push([2,4,,5]),[4,navigator.permissions.query({name:r})];case 3:return e=u.sent(),t[r]=e.state.toString(),[3,5];case 4:return u.sent(),[3,5];case 5:return o++,[3,1];case 6:return[2,t]}})})}()}),[2,Promise.all(a).then(function(t){return _t(t,de)})]})})}),T("plugins",function(){var a=[];if(navigator.plugins)for(var l=0;l<navigator.plugins.length;l++){var t=navigator.plugins[l];a.push([t.name,t.filename,t.description].join("|"))}return new Promise(function(o){o({plugins:a})})}),T("screen",function(){return new Promise(function(a){a({is_touchscreen:navigator.maxTouchPoints>0,maxTouchPoints:navigator.maxTouchPoints,colorDepth:screen.colorDepth,mediaMatches:kt()})})}),T("system",function(){return new Promise(function(a){var l=Y();a({platform:window.navigator.platform,cookieEnabled:window.navigator.cookieEnabled,productSub:navigator.productSub,product:navigator.product,useragent:navigator.userAgent,hardwareConcurrency:navigator.hardwareConcurrency,browser:{name:l.name,version:l.version},applePayVersion:At()})})});var x,Bt=Y().name!=="SamsungBrowser"?1:3,f=null;T("webgl",function(){return R(this,void 0,void 0,function(){var a;return $(this,function(l){typeof document<"u"&&((x=document.createElement("canvas")).width=200,x.height=100,f=x.getContext("webgl"));try{if(!f)throw new Error("WebGL not supported");return a=Array.from({length:Bt},function(){return function(){try{if(!f)throw new Error("WebGL not supported");var t=`
          attribute vec2 position;
          void main() {
              gl_Position = vec4(position, 0.0, 1.0);
          }
      `,o=`
          precision mediump float;
          void main() {
              gl_FragColor = vec4(0.812, 0.195, 0.553, 0.921); // Set line color
          }
      `,n=f.createShader(f.VERTEX_SHADER),r=f.createShader(f.FRAGMENT_SHADER);if(!n||!r)throw new Error("Failed to create shaders");if(f.shaderSource(n,t),f.shaderSource(r,o),f.compileShader(n),!f.getShaderParameter(n,f.COMPILE_STATUS))throw new Error("Vertex shader compilation failed: "+f.getShaderInfoLog(n));if(f.compileShader(r),!f.getShaderParameter(r,f.COMPILE_STATUS))throw new Error("Fragment shader compilation failed: "+f.getShaderInfoLog(r));var e=f.createProgram();if(!e)throw new Error("Failed to create shader program");if(f.attachShader(e,n),f.attachShader(e,r),f.linkProgram(e),!f.getProgramParameter(e,f.LINK_STATUS))throw new Error("Shader program linking failed: "+f.getProgramInfoLog(e));f.useProgram(e);for(var u=137,c=new Float32Array(4*u),s=2*Math.PI/u,i=0;i<u;i++){var m=i*s;c[4*i]=0,c[4*i+1]=0,c[4*i+2]=Math.cos(m)*(x.width/2),c[4*i+3]=Math.sin(m)*(x.height/2)}var V=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,V),f.bufferData(f.ARRAY_BUFFER,c,f.STATIC_DRAW);var F=f.getAttribLocation(e,"position");f.enableVertexAttribArray(F),f.vertexAttribPointer(F,2,f.FLOAT,!1,0,0),f.viewport(0,0,x.width,x.height),f.clearColor(0,0,0,1),f.clear(f.COLOR_BUFFER_BIT),f.drawArrays(f.LINES,0,2*u);var L=new Uint8ClampedArray(x.width*x.height*4);return f.readPixels(0,0,x.width,x.height,f.RGBA,f.UNSIGNED_BYTE,L),new ImageData(L,x.width,x.height)}catch{return new ImageData(1,1)}finally{f&&(f.bindBuffer(f.ARRAY_BUFFER,null),f.useProgram(null),f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),f.clearColor(0,0,0,0))}}()}),[2,{commonImageHash:fe(Te(a,x.width,x.height).data.toString()).toString()}]}catch{return[2,{webgl:"unsupported"}]}return[2]})})});var G=function(a,l,t,o){for(var n=(t-l)/o,r=0,e=0;e<o;e++)r+=a(l+(e+.5)*n);return r*n};T("math",function(){return R(void 0,void 0,void 0,function(){return $(this,function(a){return[2,{acos:Math.acos(.5),asin:G(Math.asin,-1,1,97),atan:G(Math.atan,-1,1,97),cos:G(Math.cos,0,Math.PI,97),cosh:Math.cosh(9/7),e:Math.E,largeCos:Math.cos(1e20),largeSin:Math.sin(1e20),largeTan:Math.tan(1e20),log:Math.log(1e3),pi:Math.PI,sin:G(Math.sin,-Math.PI,Math.PI,97),sinh:G(Math.sinh,-9/7,7/9,97),sqrt:Math.sqrt(2),tan:G(Math.tan,0,2*Math.PI,97),tanh:G(Math.tanh,-9/7,7/9,97)}]})})});var oe=(a=>(a.InvalidUrl="InvalidUrl",a.Unreachable="Unreachable",a))(oe||{});class Ae extends Pe{constructor(t){super(!0);ge(this,"_url");this._url=t}get shouldUpload(){return!0}static async verifyUrl(t){if(t.endsWith("/")||(t+="/"),!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t))return oe.InvalidUrl;const n=new Request(t,{method:"POST"});return fetch(n).then(r=>null).catch(r=>(console.error(`Network or other error: ${r.message}`),oe.Unreachable))}async detect(t,o){const n=new FormData;return n.append("file",t.filePointer),xe().then(async r=>{const e=new Request(this._url+"/detect?__id__="+r,{method:"POST",body:n});return fetch(e).then(async u=>{if(!u.ok)throw new Error((await u.json()).message);return u.json()}).then(u=>{var c;return(c=Ke.fromJson(u,t,(s,i)=>new Ye(s,0,0,0,i)))==null?void 0:c.get(K.FaceMesh)}).catch(u=>{throw new Error(u.message)})})}async uploadAnnotations(t){const o=new Headers;return o.set("Content-Type","application/json"),o.set("Accept","application/json"),xe().then(async n=>{t={__id__:n,...t};const r=new Request(this._url+"/annotations",{method:"POST",headers:o,body:JSON.stringify(t)});return fetch(r)})}updateSettings(){return Promise.resolve()}}var z=(a=>(a[a.mediapipeFaceMesh=0]="mediapipeFaceMesh",a[a.custom=1]="custom",a[a.other=-1]="other",a))(z||{});const Pt={class:"alert alert-warning d-flex align-items-center",role:"alert"},Et={xmlns:"http://www.w3.org/2000/svg",class:"bi bi-exclamation-triangle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16","aria-label":"Warning:",style:{width:"2vw"}},It={class:"modal-footer"},Tt=O({__name:"WebserviceSelectModal",props:{modelValue:{type:Boolean}},emits:["input","changeModel"],setup(a,{emit:l}){const t=a,o=l,n=se(t.modelValue);return ce(()=>t.modelValue,r=>{n.value=r}),ce(n,r=>{o("input",r)}),(r,e)=>(p(),_(d(Ze),{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=u=>n.value=u),title:"Webservice","hide-footer":!0},{default:g(()=>[e[5]||(e[5]=v("p",null," The webservice address will be used to detect a face mesh on selected images. Therefore, the images must be transferred to the webservice for processing. The open format allows it to create individual webservices by everyone and can be easily swapped. ",-1)),v("div",Pt,[(p(),j("svg",Et,e[3]||(e[3]=[v("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"},null,-1)]))),e[4]||(e[4]=v("div",null,"Be aware, that the webservice owner might store your images and annotations!",-1))]),e[6]||(e[6]=v("hr",null,null,-1)),e[7]||(e[7]=v("h6",null,"API",-1)),e[8]||(e[8]=v("p",null,[M(" The webservice API must provide the following addresses: "),v("br"),v("code",null,"/detect"),v("br"),M(" This call is used to detect a single face on a provided image file inside a POST request. "),v("br"),v("code",null,"/annotations"),v("br"),M(" This call is used to sync the annotations inside a POST request when the user triggers the download. ")],-1)),e[9]||(e[9]=v("hr",null,null,-1)),e[10]||(e[10]=v("h6",null,"URL",-1)),e[11]||(e[11]=v("p",null," Insert the webservice URL in the text field below and submit with hitting the Save button. ",-1)),e[12]||(e[12]=v("div",{id:"urlErrorText",class:"text-danger",hidden:""},null,-1)),e[13]||(e[13]=v("label",{for:"modelurl",class:"form-label",hidden:""},null,-1)),e[14]||(e[14]=v("input",{id:"modelurl",type:"url",class:"form-control",placeholder:"https://example.com/model/api",required:""},null,-1)),v("div",It,[v("button",{id:"btnCancelModal",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=u=>o("changeModel",d(z).mediapipeFaceMesh))}," Cancel "),v("button",{id:"btnSaveCustomModel",type:"submit",class:"btn btn-primary",onClick:e[1]||(e[1]=u=>o("changeModel",d(z).custom))}," Save ")])]),_:1},8,["modelValue"]))}}),Ft={"aria-label":"Face mesh model selection",class:"btn-group w-100 p-1"},Lt=O({__name:"FaceModelSelector",setup(a){const l=Qe(),t=se(!1);function o(){t.value=!0}function n(r){r===z.custom?J("#sendAnno").show(.1):J("#sendAnno").hide(.1);const e=document.getElementById("btnModelMediapipe"),u=document.getElementById("btnModelCustom");switch(r){case z.mediapipeFaceMesh:{e.checked=!0,l.models.set(K.FaceMesh,new Pe),t.value=!1;break}case z.custom:{u.checked=!0;const c=J("#modelurl"),s=String(c.val()).trim();Ae.verifyUrl(s).then(i=>{const m=J("#urlErrorText");if(i===null){l.models.set(K.FaceMesh,new Ae(s)),t.value=!1,m.hide();const V=J("#saveNotification")[0],F=et.getOrCreateInstance(V);F.show(),localStorage.setItem("apiUrl",s);const L=J("#saveNotificationText");L.text("Webservice url saved!");const N=l.allHistories;if(!N){console.error("Failed to retrieve history on API change.");return}const A=l.getModel(K.FaceMesh);if(!A)throw new Error("Failed to retrieve model on API change.");N.forEach(Q=>{A.detect(Q.file,l.selectedHistory.deletedFeatures).then(ae=>{ae!==null&&(Q.clear(),Q.merge(ae,K.FaceMesh))})}),setTimeout(()=>{F.hide(),L.text()},5e3)}else{switch(i){case oe.InvalidUrl:{m.removeAttr("hidden"),m.text("Please enter a valid URL!");break}case oe.Unreachable:{m.removeAttr("hidden"),m.text("The provided endpoint wasn't reachable!");break}}c.addClass("wrongInput"),setTimeout(function(){c.removeClass("wrongInput")},500)}});break}default:throw new Error(`No model "${r}" found to change to!`)}return!1}return(r,e)=>(p(),j("div",null,[e[5]||(e[5]=v("div",{class:"d-flex flex-column w-100 align-items-center"},[v("b",null,[v("i",{class:"bi bi-cpu me-1"}),M(" Model ")])],-1)),v("fieldset",Ft,[v("input",{id:"btnModelMediapipe",autocomplete:"off",checked:"",class:"btn-check",name:"btnradio",type:"radio",onChange:e[0]||(e[0]=u=>n(d(z).mediapipeFaceMesh))},null,32),e[3]||(e[3]=v("label",{class:"btn btn-outline-secondary",for:"btnModelMediapipe"},[M(" Mediapipe"),v("br"),v("small",null,"Offline")],-1)),v("input",{id:"btnModelCustom",autocomplete:"off",class:"btn-check",name:"btnradio",type:"radio",onChange:o},null,32),e[4]||(e[4]=v("label",{class:"btn btn-outline-secondary",for:"btnModelCustom"},[M(" Webservice"),v("br"),v("small",null,"Online")],-1))]),C(Tt,{modelValue:t.value,"onUpdate:modelValue":e[1]||(e[1]=u=>t.value=u),onChangeModel:e[2]||(e[2]=u=>n(u))},null,8,["modelValue"])]))}}),Ot=O({__name:"FaceMeshToolMenu",setup(a){const l=Be();return(t,o)=>(p(),j(te,null,[C(tt,{config:d(l),tool:d(K).FaceMesh,"not-detected-text":"No face detected"},null,8,["config","tool"]),C(ut),C(Lt)],64))}});export{Ot as default};
